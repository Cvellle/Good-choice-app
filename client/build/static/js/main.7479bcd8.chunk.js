(this["webpackJsonpGood-choice"]=this["webpackJsonpGood-choice"]||[]).push([[0],{103:function(e,t,a){},257:function(e,t,a){},259:function(e,t,a){"use strict";a.r(t);var i=a(1),r=a(0),n=a.n(r),c=a(34),s=a.n(c),l=a(29),o=a(4),d=a(7),j=a(25),b=a.n(j),u=a(273),p=a(106),h=a.n(p),m=a(271),x=a(277),O=a(275),y=a(5),v=a(28),g=a(18),f=a.n(g),N=Object(v.b)({name:"login",initialState:{id:0,email:"",role:""},reducers:{setLoggedUser:function(e,t){var a=t.payload,i=a.email,r=a.role;e.email=i,e.role=r},logOutUser:function(e){e.email="",e.role=""},changeRole:function(e,t){var a=t.payload,i=a.id,r=a.email,n=a.role;e.email=r,e.role=n,f.a.put("/api/datas",{id:{id:i},update:Object(y.a)(Object(y.a)({},t.payload),{},{role:"USER_ADVANCED"===n?"USER_ADVANCED":"ADMIN"})})}}}),w=N.actions,k=w.setLoggedUser,E=w.logOutUser,C=w.changeRole,A=function(e){return e.login},S=N.reducer,B=Object(m.a)((function(e){return Object(x.a)({root:{flexGrow:0},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}})}));function R(){var e=Object(d.b)(),t=Object(d.c)(A),a=(b()().history,B());return Object(i.jsx)("div",{className:"App-header",children:""!==t.email?Object(i.jsx)("div",{className:a.root,style:{width:"95%"},children:Object(i.jsxs)(u.a,{container:!0,spacing:3,children:[Object(i.jsx)(u.a,{item:!0,xs:6,children:Object(i.jsxs)(O.a,{display:"flex",justifyContent:"flex-start",style:{alignContent:"center"},children:[Object(i.jsx)("span",{children:Object(i.jsx)(l.b,{to:"/",style:{textDecoration:"none"},children:Object(i.jsx)(h.a,{style:{color:"white",transform:"scale(1)"}})})}),"USER_BEGINNER"!==t.role&&Object(i.jsx)("span",{children:Object(i.jsx)(l.b,{to:"/add-new",style:{color:"white",textDecoration:"none"},children:"Add new advice"})})]})}),Object(i.jsx)(u.a,{item:!0,xs:6,children:Object(i.jsx)(O.a,{display:"flex",justifyContent:"flex-end",children:Object(i.jsx)("span",{onClick:function(){e(E())},children:Object(i.jsx)(l.b,{to:"/login",style:{color:"white",textDecoration:"none"},children:"logOutUser"})})})})]})}):Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:Object(i.jsx)(l.b,{to:"/signup",style:{textDecoration:"none",color:"white"},children:"SignUp"})}),Object(i.jsx)("span",{children:Object(i.jsx)(l.b,{to:"/login",style:{textDecoration:"none",color:"white"},children:"Login"})})]})})}var U=Object(v.b)({name:"signUp",initialState:{usersCount:0},reducers:{increment:function(e){e.usersCount+=1},incrementByAmount:function(e,t){e.usersCount+=t.payload}}}),D=U.actions,I=D.increment,q=(D.incrementByAmount,function(e){return e.signUp.usersCount}),G=U.reducer,F=a(59),L=a(19),K={firstName:"",lastName:"",email:"",password:"",role:"USER_BEGINNER",registrationKey:" "},P=L.a().shape({firstName:L.b().required("First name is required"),lastName:L.b().required("Last name is required"),email:L.b().email("Email is not valid").required("Email is required"),password:L.b().required("Password is required.")});function _(){var e=Object(d.c)(q),t=Object(d.b)();return Object(i.jsx)("div",{children:Object(i.jsx)(F.a,{initialValues:K,onSubmit:function(a,i){i.setSubmitting;t(I()),f.a.post("/api/datas",{id:Number(e),firstName:a.firstName,lastName:a.lastName,email:a.email,password:a.password,role:a.role,registrationKey:a.registrationKey})},validationSchema:P,children:function(e){var t=e.values,a=e.touched,r=e.errors,n=(e.dirty,e.isSubmitting),c=e.handleChange,s=e.handleBlur,l=e.handleSubmit;e.handleReset;return Object(i.jsxs)("form",{onSubmit:l,children:[Object(i.jsx)("label",{htmlFor:"firstName",style:{display:"block"},children:"First name"}),Object(i.jsx)("input",{id:"firstName",placeholder:"Enter your first name",type:"text",value:t.firstName,onChange:c,onBlur:s,className:r.firstName&&a.firstName?"text-input error":"text-input"}),Object(i.jsx)("p",{style:{color:"red",visibility:"visible",height:"15px",textAlign:"center"},children:r.firstName&&a.firstName&&Object(i.jsx)("div",{className:"input-feedback",children:r.firstName})}),Object(i.jsx)("label",{htmlFor:"firstName",style:{display:"block"},children:"Last name"}),Object(i.jsx)("input",{id:"lastName",placeholder:"Enter your last name",type:"text",value:t.lastName,onChange:c,onBlur:s,className:r.lastName&&a.lastName?"text-input error":"text-input"}),Object(i.jsx)("p",{style:{color:"red",visibility:"visible",height:"15px",textAlign:"center"},children:r.lastName&&a.lastName&&Object(i.jsx)("div",{className:"input-feedback",children:r.lastName})}),Object(i.jsx)("label",{htmlFor:"email",style:{display:"block"},children:"Email"}),Object(i.jsx)("input",{id:"email",placeholder:"Enter your email",type:"text",value:t.email,onChange:c,onBlur:s,className:r.email&&a.email?"text-input error":"text-input"}),Object(i.jsx)("p",{style:{color:"red",visibility:"visible",height:"15px",textAlign:"center"},children:r.email&&a.email&&Object(i.jsx)("div",{className:"input-feedback",children:r.email})}),Object(i.jsx)("label",{htmlFor:"password",style:{display:"block"},children:"Password"}),Object(i.jsx)("input",{required:!0,id:"password",placeholder:"Enter your password",type:"text",value:t.password,onChange:c,onBlur:s,className:r.password&&a.password?"text-input error":"text-input"}),Object(i.jsx)("p",{style:{color:"red",visibility:"visible",height:"15px",textAlign:"center"},children:r.password&&a.password&&Object(i.jsx)("div",{className:"input-feedback",children:r.password})}),Object(i.jsx)("input",{id:"role",placeholder:"Enter your role",value:t.role,onChange:c,onBlur:s,className:r.role&&a.role?"text-input error":"text-input",type:"hidden"}),Object(i.jsx)("input",{id:"registrationKey",placeholder:"Enter your role",value:t.registrationKey,onChange:c,onBlur:s,className:r.role&&a.role?"text-input error":"text-input",type:"hidden"}),Object(i.jsx)("button",{type:"submit",disabled:n,children:"Submit"})]})}})})}var M={id:0,email:"",password:""},V=L.a().shape({email:L.b().email("Email is not valid").required("Email is required"),password:L.b().required("Password is required.")});function T(){var e=Object(d.b)(),t=Object(d.c)(A),a=b()().history;return Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:t.email}),Object(i.jsx)(F.a,{initialValues:M,onSubmit:function(t,i){i.setSubmitting;f.a.get("/api/datas",{params:{email:t.email,password:t.password}}).then((function(t){t.data[0]&&(a.push("/"),e(k({id:t.data[0].id,email:t.data[0].email,role:t.data[0].role})))}))},validationSchema:V,children:function(e){var t=e.values,a=e.touched,r=e.errors,n=(e.dirty,e.isSubmitting,e.handleChange),c=e.handleBlur,s=e.handleSubmit;e.handleReset;return Object(i.jsxs)("form",{onSubmit:s,children:[Object(i.jsx)("label",{htmlFor:"email",style:{display:"block"},children:"Email"}),Object(i.jsx)("input",{id:"email",placeholder:"Enter your email",type:"text",value:t.email,onChange:n,onBlur:c,className:r.email&&a.email?"text-input error":"text-input"}),Object(i.jsx)("p",{style:{color:"red",visibility:"visible",height:"15px",textAlign:"center"},children:r.email&&a.email&&Object(i.jsx)("div",{className:"input-feedback",children:r.email})}),Object(i.jsx)("label",{htmlFor:"password",style:{display:"block"},children:"Password"}),Object(i.jsx)("input",{required:!0,id:"password",placeholder:"Enter your password",type:"text",value:t.password,onChange:n,onBlur:c,className:r.password&&a.password?"text-input error":"text-input"}),Object(i.jsx)("p",{style:{color:"red",visibility:"visible",height:"15px",textAlign:"center"},children:r.password&&a.password&&Object(i.jsx)("div",{className:"input-feedback",children:r.password})}),Object(i.jsx)("button",{type:"submit",children:"Submit"})]})}})]})}var J=a(274),W=Object(v.b)({name:"dashboard",initialState:{advices:[{id:3,name:"Cheap bicycle parts",location:"Ivankova\u010dka 16",category:"sport, bicycle, hobby",likes:0},{id:2,name:"Good takeaway pasta",location:"Kraljice Marije 12",category:"food",likes:0},{id:4,name:"Natural sports creams - Mala ruska apoteka",location:"Goldsvordijeva 3",category:"health, sport",likes:0},{id:5,name:"Cheap takeway coffee - Caffe Boulevard",location:"Bulevar Kralja Aleksandra 103",category:"lifestyle, food, free time",likes:0},{id:6,name:"Cheap bicycle parts",location:"Ivankova\u010dka 16",category:"sport, bicycle, hobby",likes:0},{id:1,name:"Cheap bicycle parts",location:"Ivankova\u010dka 16",category:"sport, bicycle, hobby",likes:6}]},reducers:{setItems:function(e,t){return Object(y.a)(Object(y.a)({},e),{},{advices:t.payload})},likeAction:function(e,t){var a=t.payload,i=a.id,r=(a.likes,t.payload.likes+1);f.a.put("/api/advices",{id:{id:i},update:Object(y.a)(Object(y.a)({},t.payload),{},{likes:r})});var n=e.advices.map((function(e){return e.id===t.payload.id?Object(y.a)(Object(y.a)({},t.payload),{},{likes:r}):e}));return Object(y.a)(Object(y.a)({},e),{},{advices:n})},addItems:function(e,t){var a=t.payload,i=a.id,r=a.name,n=a.location,c=a.category,s=a.likes;f.a.post("/api/advices",{id:i,name:r,location:n,category:c,likes:s});var l=t.payload;return Object(y.a)(Object(y.a)({},e),{},{advices:e.advices.concat(l)})}}}),$=W.actions,z=$.setItems,H=$.likeAction,Q=$.addItems,X=function(e){return e.dashboard},Y=W.reducer,Z=a(112),ee=a.n(Z),te=a(10),ae=a(60),ie={key:"root",storage:ee.a,whitelist:["login","dashboard"]},re=Object(te.c)({signUp:G,dashboard:Y,login:S}),ne=Object(ae.a)(ie,re),ce=Object(v.a)({reducer:ne}),se=(a(103),Object(m.a)((function(e){return Object(x.a)({root:{flexGrow:1},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:"1vw"}})}))),le=function(){var e=Object(d.b)(),t=Object(d.c)(X),a=Object(d.c)(A),c=b()().history,s=se();Object(r.useEffect)((function(){!ce.getState()&&e((function(e){f.a.get("api/advices").then((function(t){e(z(t.data))}))})),!a&&c.push("/login")}),[]);var l=a,o=function(t){return Object(i.jsx)(n.a.Fragment,{children:Object(i.jsx)(u.a,{item:!0,xs:12,sm:4,children:Object(i.jsx)("div",{className:"advice-item",children:Object(i.jsxs)(J.a,{className:s.paper,children:[Object(i.jsx)("b",{children:"Title"}),Object(i.jsx)("p",{children:t.name}),Object(i.jsx)("b",{children:"Location"}),Object(i.jsx)("p",{children:t.location}),Object(i.jsx)("b",{children:"Category"}),Object(i.jsx)("p",{children:t.category}),Object(i.jsxs)("p",{children:[Object(i.jsx)("span",{children:Object(i.jsx)("b",{children:"Likes: "})}),t.likes]}),Object(i.jsx)("i",{className:"fa fa-thumbs-o-up",onClick:function(){return function(t,a){e(H(t)),e(C(a))}(t,l)}})]})})})})},j=t.advices.map((function(e){return Object(i.jsx)(o,{id:e.id,name:e.name,location:e.location,category:e.category,likes:e.likes},e.id)}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{id:"res"}),Object(i.jsx)("div",{className:"flex-wrapper advice-list",children:j})]})},oe=a(53),de=a(33),je=function(e){e.saveAdvice;var t=Object(d.b)(),a=Object(d.c)(A),n=b()().history;Object(r.useEffect)((function(){"USER_BEGINNER"===a.role&&n.push("/")}),[]);var c=Object(r.useState)({id:0,name:"",location:"",category:"",likes:0}),s=Object(de.a)(c,2),l=s[0],o=s[1],j=function(e){var t=e.currentTarget,a=t.id,i=t.value,r=(new Date).getTime();o(Object(y.a)(Object(y.a)({},l),{},Object(oe.a)({id:r},a,i)))};return Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(Q(l)),o(Object(y.a)(Object(y.a)({},l),{},{id:l.id+1}))},className:"Add-advice",children:[Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"hidden",id:"id",placeholder:"Id",value:l.id})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",id:"name",placeholder:"Name",onChange:j})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",id:"location",placeholder:"Location",onChange:j})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",id:"category",placeholder:"Category",onChange:j})}),Object(i.jsx)("button",{disabled:void 0===l,children:"Add advice"})]})},be=function(e){return e.isAuth?Object(i.jsx)(o.Route,Object(y.a)(Object(y.a)({},e),{},{component:e.component,render:void 0})):Object(i.jsx)(o.Redirect,{to:{pathname:e.redirectPath}})};var ue=function(){var e=Object(d.c)(A).role,t=!1,a=!1,r=!1;return"ADMIN"==e&&(t=!0),"USER_BEGINNER"==e&&(a=!0),"USER_ADVANCED"==e&&(r=!0),Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)(l.a,{children:[Object(i.jsx)(R,{}),Object(i.jsx)(o.Route,{path:"/signup",component:_,exact:!0}),Object(i.jsx)(o.Route,{path:"/login",component:T,exact:!0}),Object(i.jsx)(be,{component:le,isAuth:t||a||r,redirectPath:"/login",path:"/",exact:!0}),Object(i.jsx)(be,{component:je,isAuth:t||r,redirectPath:"/",path:"/add-new",exact:!0})]})})},pe=a(113);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(257);var he=Object(ae.b)(ce);s.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(d.a,{store:ce,children:Object(i.jsx)(pe.a,{persistor:he,children:Object(i.jsx)(ue,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[259,1,2]]]);
//# sourceMappingURL=main.7479bcd8.chunk.js.map